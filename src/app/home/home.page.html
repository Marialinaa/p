<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>
      TenK
    </ion-title>
    <ion-buttons slot="end" *ngIf="isAuthenticated">
      <ion-button (click)="logout()">
        <ion-icon slot="start" name="log-out-outline"></ion-icon>
        Sair
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar color="light">
    <div class="sistema-info">
      <em>Sistema de Gerenciamento - v1.5.0</em>
      <div class="idealizacao">
        <span>Desenvolvido por Maria Lina - © 2025</span>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="content-container">
    <!-- Conteúdo para usuários autenticados -->
    <div *ngIf="isAuthenticated" class="auth-container">
      <ion-card>
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="person-circle-outline"></ion-icon>
            Olá, {{ userName }}!
          </ion-card-title>
          <ion-card-subtitle>Área do Usuário Autenticado</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <p>Você está logado e tem acesso a todos os recursos do sistema.</p>
          
          <h3>Acesso Rápido</h3>
          <div class="action-buttons">
            <ion-button routerLink="/blog" expand="block" color="tertiary">
              <ion-icon slot="start" name="document-text-outline"></ion-icon>
              Acessar Blog
            </ion-button>
            
            <ion-button routerLink="/user-crud" expand="block" color="primary" *ngIf="isAuthenticated">
              <ion-icon slot="start" name="people-outline"></ion-icon>
              Gerenciar Usuários
            </ion-button>
            
            <ion-button (click)="logout()" expand="block" color="medium">
              <ion-icon slot="start" name="log-out-outline"></ion-icon>
              Sair do Sistema
            </ion-button>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Seção de Informações e Notícias -->
      <ion-card>
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="newspaper-outline"></ion-icon>
            Últimas Atualizações
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <ion-item *ngFor="let noticia of noticias">
              <ion-icon slot="start" name="alert-circle-outline" *ngIf="noticia.importante"></ion-icon>
              <ion-label>
                <h3>{{ noticia.titulo }}</h3>
                <p>{{ noticia.data }} - {{ noticia.resumo }}</p>
              </ion-label>
              <ion-button slot="end" fill="clear">Ler mais</ion-button>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>

      <!-- Seção de Estatísticas -->
      <ion-card>
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="stats-chart-outline"></ion-icon>
            Estatísticas do Sistema
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-grid>
            <ion-row>
              <ion-col size="6">
                <div class="stat-item">
                  <ion-icon name="people-outline"></ion-icon>
                  <h2>{{ userStats.total }}</h2>
                  <p>Usuários Cadastrados</p>
                </div>
              </ion-col>
              <ion-col size="6">
                <div class="stat-item">
                  <ion-icon name="document-text-outline"></ion-icon>
                  <h2>{{ blogStats.total }}</h2>
                  <p>Posts no Blog</p>
                </div>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="6">
                <div class="stat-item">
                  <ion-icon name="calendar-outline"></ion-icon>
                  <h2>{{ userStats.novos }}</h2>
                  <p>Novos essa semana</p>
                </div>
              </ion-col>
              <ion-col size="6">
                <div class="stat-item">
                  <ion-icon name="time-outline"></ion-icon>
                  <h2>{{ blogStats.recentes }}</h2>
                  <p>Posts recentes</p>
                </div>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Conteúdo para usuários não autenticados -->
    <div *ngIf="!isAuthenticated">
      <!-- Área de Login/Registro -->
      <ion-card class="non-auth-container">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="log-in-outline"></ion-icon>
            Acesso ao Sistema
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p>Faça login para acessar todos os recursos do sistema TenK, incluindo o Blog. Novo por aqui? Registre-se para criar sua conta.</p>
          
          <div class="action-buttons">
            <ion-button routerLink="/login" expand="block" color="primary">
              <ion-icon slot="start" name="log-in-outline"></ion-icon>
              Login
            </ion-button>
            
            <ion-button routerLink="/register" expand="block" color="secondary">
              <ion-icon slot="start" name="person-add-outline"></ion-icon>
              Registro
            </ion-button>

            <div class="login-help">
              <a routerLink="/login">Esqueci minha senha</a>
              <span class="separator">|</span>
              <a routerLink="/support">Preciso de ajuda</a>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Serviços Disponíveis -->
      <ion-card>
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="apps-outline"></ion-icon>
            Serviços Disponíveis
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-grid>
            <ion-row>
              <ion-col size="12" size-md="6" *ngFor="let servico of servicosPublicos">
                <div class="servico-item">
                  <ion-icon [name]="servico.icone"></ion-icon>
                  <h3>{{ servico.titulo }}</h3>
                  <p>{{ servico.descricao }}</p>
                  <ion-button [routerLink]="servico.link" fill="clear">
                    Acessar
                    <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
                  </ion-button>
                </div>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card-content>
      </ion-card>

      <!-- Prévia do Blog -->
      <ion-card>
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="newspaper-outline"></ion-icon>
            Prévia do Blog
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <ion-item *ngFor="let post of blogPosts">
              <ion-thumbnail slot="start">
                <img [src]="post.imagem" alt="Imagem do post">
              </ion-thumbnail>
              <ion-label>
                <h3>{{ post.titulo }}</h3>
                <p>{{ post.data }} - {{ post.autor }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
          
          <ion-button (click)="navigateToLogin()" expand="block" color="tertiary">
            <ion-icon slot="start" name="log-in-outline"></ion-icon>
            Faça login para acessar o Blog
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Seção de Funcionalidades (Comum a todos) -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="rocket-outline"></ion-icon>
          Funcionalidades do Sistema
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="features-grid">
          <div class="feature-card" *ngFor="let feature of features">
            <ion-icon [name]="feature.icone"></ion-icon>
            <h3>{{ feature.titulo }}</h3>
            <p>{{ feature.descricao }}</p>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Rodapé -->
    <footer>
      <div class="footer-content">
        <p>TenK - Sistema de Gerenciamento v1.5.0</p>
        <p>Desenvolvido com Angular 17 e Ionic 7</p>
        <p>&copy; 2025 - Todos os direitos reservados</p>
      </div>
    </footer>
  </div>
</ion-content>
